{
  "hash": "98cb8f72d85e7a2fc4191afffd1179e5",
  "result": {
    "markdown": "---\ntitle: Greek sites\nfilters: \n  - shinylive\ndate: 2024-09-17\ndescription: \"...\"\nimage: delphi.png\ntwitter-card:\n  image: \"delphi.png\"\nopen-graph:\n  image: \"delphi.png\"\ncategories:\n  - misc\n---\n\n\n\n<!-- format: html -->\n\n<!-- format:  -->\n<!--   html: -->\n<!--     page-layout: custom -->\n<!-- server: shiny -->\n\n\n\n::: {.cell}\n::: {#fig-gr-map .cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-d418272f665401aa87a0\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-d418272f665401aa87a0\">{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"createMapPane\",\"args\":[\"point\",440]},{\"method\":\"addCircleMarkers\",\"args\":[[38.0050050828939,37.4004113416629,38.482262805512,37.385027963801,39.5472071464359,38.0411021163525,37.5988903294723,37.9159981636785,37.638079919946,38.293474199681,37.8534923116545,37.8098826881479,40.4735312901904],[27.1929993541689,25.2669701104675,22.5011880961762,27.2564880956547,20.7899295850461,23.5385462536644,23.0745098345935,22.9930448035988,21.6302942887048,23.8443693937698,27.5274798392526,22.7104262840631,25.526396200017],6,null,\"Greek sites\",{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"pane\":\"point\",\"stroke\":true,\"color\":\"#333333\",\"weight\":1,\"opacity\":0.9,\"fill\":true,\"fillColor\":\"#ADD8E6\",\"fillOpacity\":0.6},null,null,[\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>1&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>0000-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0300-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Claros&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Apollo&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>2&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-009-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0070-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Delos&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Apollo&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>http://www.poetryatlas.com/poetry/poem/3851/delos.html&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>3&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-349-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0390-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Delphi&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Apollo&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>http://www.poetryatlas.com/poetry/poem/1039/at-delphi.html&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>4&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-699-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>1493-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Didyma&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Apollo&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>5&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-099-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0392-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Dodona&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Zeus&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>http://www.poetryatlas.com/poetry/poem/944/childe-harold%26%23039%3Bs-pilgrimage%2C-canto-the-second.html&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>6&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-049-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0350-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Eleusis&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Demeter&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>7&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-024-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0350-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Epidaurus&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Asclepius&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>8&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>0000-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0250-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Isthmus of Corinth&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Poseidon&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>9&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-049-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0350-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Olympia&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Zeus&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>10&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>0000-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0100-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Oropos&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Amphiaraos&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>11&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-019-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0100-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Magnesia on the Meander&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Artemis&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>12&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-002-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0235-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Nemea&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>Zeus&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class= id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>13&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>CATEGORY&emsp;<\\/th><td>shrine&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>START&emsp;<\\/th><td>-119-01-01&emsp;<\\/td><\\/tr><tr><td>3<\\/td><th>END&emsp;<\\/th><td>0200-01-01&emsp;<\\/td><\\/tr><tr><td>4<\\/td><th>PLACE&emsp;<\\/th><td>Samothrace&emsp;<\\/td><\\/tr><tr><td>5<\\/td><th>GOD&emsp;<\\/th><td>pan&emsp;<\\/td><\\/tr><tr><td>6<\\/td><th>POEM&emsp;<\\/th><td>placeholder&emsp;<\\/td><\\/tr><\\/table><\\/div>\"],{\"maxWidth\":800,\"minWidth\":50,\"autoPan\":true,\"keepInView\":false,\"closeButton\":true,\"closeOnClick\":true,\"className\":\"\"},[\"Claros\",\"Delos\",\"Delphi\",\"Didyma\",\"Dodona\",\"Eleusis\",\"Epidaurus\",\"Isthmus of Corinth\",\"Olympia\",\"Oropos\",\"Magnesia on the Meander\",\"Nemea\",\"Samothrace\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addHomeButton\",\"args\":[20.7899295850461,37.385027963801,27.5274798392526,40.4735312901904,true,\"Greek sites\",\"Zoom to Greek sites\",\"<strong> Greek sites <\\/strong>\",\"bottomright\"]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"CartoDB.DarkMatter\"],\"Greek sites\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addLegend\",\"args\":[{\"colors\":[\"#ADD8E6\"],\"labels\":[\"Greek sites\"],\"na_color\":null,\"na_label\":\"NA\",\"opacity\":1,\"position\":\"topright\",\"type\":\"factor\",\"title\":\"\",\"extra\":null,\"layerId\":null,\"className\":\"info legend\",\"group\":\"Greek sites\"}]}],\"limits\":{\"lat\":[37.385027963801,40.4735312901904],\"lng\":[20.7899295850461,27.5274798392526]},\"fitBounds\":[37.385027963801,20.7899295850461,40.4735312901904,27.5274798392526,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}</script>\n```\n\n\nGreek sites\n:::\n:::\n\n\n\n```{shinylive-r}\n#| standalone: true\n#| viewerHeight: 400\nlibrary(shiny)\nlibrary(bslib)\n\ntheme <- bs_theme(font_scale = 1.5)\n\n# Define UI for app that draws a histogram ----\nui <- page_sidebar(theme = theme,\n  sidebar = sidebar(open = \"open\",\n    numericInput(\"n\", \"Sample count\", 100),\n    checkboxInput(\"pause\", \"Pause\", FALSE),\n  ),\n  plotOutput(\"plot\", width=500)\n)\n\nserver <- function(input, output, session) {\n  data <- reactive({\n    input$resample\n    if (!isTRUE(input$pause)) {\n      invalidateLater(1000)\n    }\n    rnorm(input$n)\n  })\n  \n  output$plot <- renderPlot({\n    hist(data(),\n      breaks = 40,\n      xlim = c(-2, 2),\n      ylim = c(0, 1),\n      lty = \"blank\",\n      xlab = \"value\",\n      freq = FALSE,\n      main = \"\"\n    )\n    \n    x <- seq(from = -2, to = 2, length.out = 500)\n    y <- dnorm(x)\n    lines(x, y, lwd=1.5)\n    \n    lwd <- 5\n    abline(v=0, col=\"red\", lwd=lwd, lty=2)\n    abline(v=mean(data()), col=\"blue\", lwd=lwd, lty=1)\n\n    legend(legend = c(\"Normal\", \"Mean\", \"Sample mean\"),\n      col = c(\"black\", \"red\", \"blue\"),\n      lty = c(1, 2, 1),\n      lwd = c(1, lwd, lwd),\n      x = 1,\n      y = 0.9\n    )\n  }, res=140)\n}\n\n# Create Shiny app ----\nshinyApp(ui = ui, server = server)\n```\n\n\n\n<!-- ```{r, include=FALSE, eval=FALSE} -->\n<!-- library(tidyverse) -->\n<!-- library(shiny) -->\n<!-- library(sf) -->\n<!-- library(leaflet) -->\n<!-- library(RColorBrewer) -->\n\n<!-- gr <- read_excel(\"greek_sites.xlsx\") -->\n\n<!-- # https://github.com/tidyverse/lubridate/issues/2 -->\n<!-- parse_bce_ymd <- function(str) { -->\n<!--   regex <- \"(\\\\d{4})(-\\\\d{2}-\\\\d{2})\" -->\n<!--   match <- stringr::str_match(str, regex) -->\n<!--   years_n <- readr::parse_number(match[, 2]) - 1 # Beware the -1 here -->\n<!--   right_side <- match[, 3] -->\n<!--   date <- ymd(paste0(\"0000-\",right_side)) - years(years_n) -->\n<!--   return(date) -->\n<!-- } -->\n\n<!-- gr$START <- parse_bce_ymd(gr$START) -->\n<!-- gr$END <- ymd(gr$END) -->\n\n\n<!-- ui <- bootstrapPage( -->\n<!--   tags$style(type = \"text/css\", \"html, body {width:100%;height:100%}\"), -->\n<!--   leafletOutput(\"map\", width = \"100%\", height = \"100%\"), -->\n<!--   absolutePanel(top = 10, right = 10, -->\n<!--     sliderInput(\"date\", \"Year\", min(as.Date(gr$START)), max(as.Date(gr$END)), -->\n<!--                 value=c(as.Date(\"-1099-01-01\"), as.Date(\"1493-01-01\")) -->\n<!--       # value = range(quakes$mag), step = 0.1 -->\n<!--     ), -->\n<!--     selectInput(\"colors\", \"Color Scheme\", -->\n<!--       rownames(subset(brewer.pal.info, category %in% c(\"seq\", \"div\"))) -->\n<!--     ), -->\n<!--     checkboxInput(\"legend\", \"Show legend\", TRUE) -->\n<!--   ) -->\n<!-- ) -->\n\n\n\n<!-- server <- function(input, output, session) { -->\n\n<!--   # Reactive expression for the data subsetted to what the user selected -->\n<!--   filteredData <- reactive({ -->\n<!--     gr[gr$START >= input$date[1] & gr$END <= input$date[2],] -->\n<!--   }) -->\n\n<!--   # This reactive expression represents the palette function, -->\n<!--   # which changes as the user makes selections in UI. -->\n<!--   colorpal <- reactive({ -->\n<!--     colorNumeric(input$colors, range(min(as.Date(gr$START)), max(as.Date(gr$END)))) -->\n<!--   }) -->\n\n<!--   output$map <- renderLeaflet({ -->\n<!--     # Use leaflet() here, and only include aspects of the map that -->\n<!--     # won't need to change dynamically (at least, not unless the -->\n<!--     # entire map is being torn down and recreated). -->\n<!--     leaflet(gr) %>% addTiles() %>% -->\n<!--       fitBounds(~min(LON), ~min(LAT), ~max(LON), ~max(LAT)) -->\n<!--   }) -->\n\n<!--   # Incremental changes to the map (in this case, replacing the -->\n<!--   # circles when a new color is chosen) should be performed in -->\n<!--   # an observer. Each independent set of things that can change -->\n<!--   # should be managed in its own observer. -->\n<!--   observe({ -->\n<!--     pal <- colorpal() -->\n\n<!--     leafletProxy(\"map\", data = filteredData()) %>% -->\n<!--       clearShapes() %>% -->\n<!--       addCircles(radius = ~10^SIZE/10, weight = 1, color = \"#777777\", -->\n<!--         fillColor = ~pal(SIZE), fillOpacity = 0.7, popup = ~paste(SIZE) -->\n<!--       ) -->\n<!--   }) -->\n\n<!--   # Use a separate observer to recreate the legend as needed. -->\n<!--   observe({ -->\n<!--     proxy <- leafletProxy(\"map\", data = gr) -->\n\n<!--     # Remove any existing legend, and only if the legend is -->\n<!--     # enabled, create a new one. -->\n<!--     proxy %>% clearControls() -->\n<!--     if (input$legend) { -->\n<!--       pal <- colorpal() -->\n<!--       proxy %>% addLegend(position = \"bottomright\", -->\n<!--         pal = pal, values = ~SIZE -->\n<!--       ) -->\n<!--     } -->\n<!--   }) -->\n<!-- } -->\n\n<!-- shinyApp(ui, server) -->\n\n<!-- ``` -->\n\n\n<!-- ```{r} -->\n<!-- sliderInput(\"bins\", \"Number of bins:\",  -->\n<!--             min = 1, max = 50, value = 30) -->\n<!-- plotOutput(\"distPlot\") -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- #| context: server -->\n<!-- output$distPlot <- renderPlot({ -->\n<!--   x <- faithful[, 2]  # Old Faithful Geyser data -->\n<!--   bins <- seq(min(x), max(x), length.out = input$bins + 1) -->\n<!--   hist(x, breaks = bins, col = 'darkgray', border = 'white') -->\n<!-- }) -->\n<!-- ``` -->\n\n\n<!-- {{< video https://www.youtube.com/watch?v=EDxuMXb0joE >}} -->\n\n<!-- > Wehrt euch, leistet Widerstand -->\n<!-- > gegen den Faschismus hier im Land. -->\n<!-- > Auf die Barrikaden, auf die Barrikaden! -->\n\n\n<!-- You can download the data by clicking the button below. -->\n\n\n<!-- ```{r echo = F, collapse = TRUE, comment = \"#>\", message = FALSE, warning=FALSE} -->\n<!-- library(downloadthis) -->\n\n<!-- antiAfD_geo_sf %>% download_this( -->\n<!--     output_name = \"compact_bwr\", -->\n<!--     output_extension = \".xlsx\", -->\n<!--     button_label = \"Download dataset as xlsx\", -->\n<!--     button_type = \"warning\", -->\n<!--     has_icon = TRUE, -->\n<!--     icon = \"fa fa-save\" -->\n<!--   ) -->\n<!-- ``` -->\n\n\n<!-- ****** -->\n\n<!-- <span style=\"font-family:Garamond; font-size:0.8em;\">The basic data is taken from the monitoring by the <a href=\"https://taz.de/\">TAZ newspaper</a>, which has kept a monitor of the recent demonstrations against the AfD, available at <a href=\"https://taz.de/demo\">https://taz.de/demo</a>.</a></span> -->\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../../../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../../../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../../../../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../../../../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../../../../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n<script src=\"../../../../../site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js\"></script>\n<script src=\"../../../../../site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js\"></script>\n<link href=\"../../../../../site_libs/HomeButton-0.0.1/home-button.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/HomeButton-0.0.1/home-button.js\"></script>\n<script src=\"../../../../../site_libs/HomeButton-0.0.1/easy-button-src.min.js\"></script>\n<script src=\"../../../../../site_libs/clipboard-0.0.1/setClipboardText.js\"></script>\n<link href=\"../../../../../site_libs/mapviewCSS-0.0.1/mapview-popup.css\" rel=\"stylesheet\" />\n<link href=\"../../../../../site_libs/mapviewCSS-0.0.1/mapview.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}